<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>

</head>

<body>
    <canvas width="1000" height="1000">your browser not support canvas</canvas>
</body>

</html>
<script>
    let canvas = document.querySelector('canvas');
    if (canvas.getContext) {
        let ctx = canvas.getContext('2d');
        let move;
        // 做动画的第一步永远都是先清除canvas内容
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        let ball = {
            x: 100,
            y: 100,
            // vx 和 vy 是做运动时加的值  这两个值决定了运动的快慢
            vx: 5, vy: 2,
            radius: 50,
            renning: false,
            color: 'green',
            DrawBall: function () {
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fill();
            }
        }
        function drawRect() {
            ctx.fillStyle = 'rgba(200,200,200,.5)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        }
        canvas.addEventListener('mousemove', function (e) {
            if (!ball.running) {
                // 画出个矩形区域
                drawRect();
                // 画球 并 让球跟随鼠标

                // 跟随鼠标
                ball.x = e.offsetX;
                ball.y = e.offsetY;
                ball.DrawBall();
            }
        });
        // 点击的时候释放ball
        function Draw() {
            // 画矩形
            drawRect();
            // 画球
            ball.DrawBall();
            // if (ball.x > canvas.width || ball.x < 0) {
            //     ball.x = -ball.x;
            // }
            // if (ball.y > canvas.height || ball.y < 0) {
            //     ball.y = 0 - ball.y;
            // }
            // 这里每次加加 就做了运动
            // ball.x += ball.vx;
            ball.x = ball.x + ball.vx;
            // ball.y += ball.vy;
            ball.y = ball.y + ball.vy;
            // 限制活动区域
            if (ball.y + ball.vy > canvas.height || ball.y + ball.vy < 0) {
                // 这句话 的意思 是 如果到头了 就出负值  让球倒着跑 又因为draw会一直执行 就行一直判断 一旦到0 就倒着  这个地方很精辟 
                ball.vy = -ball.vy;
                ball.color = '#' + Math.floor(Math.random() * 0xffffff).toString(16).padEnd(6, '0');
            }
            if (ball.x + ball.vx > canvas.width || ball.x + ball.vx < 0) {
                ball.vx = -ball.vx;
                ball.color = '#' + Math.floor(Math.random() * 0xffffff).toString(16).padEnd(6, '0');
            }
            move = window.requestAnimationFrame(Draw);

        }
        canvas.addEventListener('click', function () {
            if (!ball.running) {
                move = window.requestAnimationFrame(Draw);
                ball.running = true;
            }
        });
        canvas.addEventListener('mouseout', function () {
            window.cancelAnimationFrame(move);
            ball.running = false;
        });
    }
</script>